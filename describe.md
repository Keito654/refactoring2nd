# イキトメ!

Providing by 品川アジャイル


---

## 概要

- 目の前に動くコードがあります。正常に動作はするものの、このまま機能を追加するのはちょっと厳しそうです。
- 今回は、実際の現場でよくある、そんな状況を想定し、TDD の一般的な進め方ではなく、 BDD のアプローチでモブプログラミングを進めてゆきます。

---

## FizzBuzz とは

- 1 から順番に数字を表示するだけ
- ただし、次の条件で置換する
  - 3 の倍数なら Fizz
  - 5 の倍数なら Buzz
  - 両方の倍数なら FizzBuzz

(詳しくは Wikipedia の [Fizz Buzz](https://ja.wikipedia.org/wiki/Fizz_Buzz) で)

---

## シナリオ

- 前任者が FizzBuzz を実装しました。テストコードがあり、1 から 5 までは正しく動作することが分かってます。これを 100 まで動作する FizzBuzz に仕上げる仕事を上司から指示さまれました。
- コードを見ると、そのまま拡張するのはちょっと難しそうです。リファクタリングの出番です。テストを失敗することなく、グリーンを維持したまま、コードを洗練してゆきましょう。

---

## 息止めルール

- このセッションでは、テストレッド (テストが失敗してる) の間は、見ている人も全員息を止めるルールで進めてゆきます。ご協力をお願いします。
- モブのドライバーは、素早くテストグリーン (テストが通る状態) に戻してください。死人が出てしまわないようにご注意を! w

---

## モブプログラミング

- チーム全体で、一つのモニタ、一つのキーボード、一つのコンピュータで作業をするワーキングスタイルです。
- 作業者はドライバーで、ほかのメンバーは全員ナビゲーターです。ドライバーはあたかもコンピュータの拡張入力装置のようにふるまって、周りのナビゲーターからの指示通りに入力していくように努めます。
- ドライバーは数分ごとに交代します。

---

## BDD スタイルについて

- xUnit のテストコードに慣れた方は、このテストが assert 文でないことに気が付かれたかと思います。
- describe, it という構文は BDD (ビヘイビア駆動開発) のフォーマットです。 BDD は、アプリケーションのあるべき振る舞いを定義し、それをテストコードにして実行します。
  - describe (テストしたいふるまい)
  - it should (あるべき出力など)
- というような形式で記述していきます。あるべき出力が得られなければ、テストはレッドになり、「テストしたいふるまい」がパスしないことがわかります。

---

## ふりかえり

- 最初のコードと見比べましょう。
- リファクタリングとはなんだったのか話し合いましょう。
